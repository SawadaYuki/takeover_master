#Abstract 

プラットフォームアーキテクチャとそれらの技術的相関関係へのそれらの影響を十分に理解するために、
Java SDK、C ++ NDK、新しい強力なRenderscriptで提供されている3つのAPIセットすべてで、同じ代表的なAndroidアプリケーションのバリエーションを開発しています。

同じアプリケーションに基づいて、実践的なプログラミングの利便性、実行時の動作、さまざまなプログラミングモデルの技術的な関連性に焦点を当てて、詳細なリンゴとリンゴの分析を行います。

Androidで提供されている現在のプログラミングモデルを改善することができます。
プログラミングモデルとしてのプログラマビリティとパフォーマンスの両方の要件を満たすことが期待される統一されたソリューションを提案し、モバイルデバイスに展開するとアプリケーションのセキュリティと移植性も維持します。

#intro

プログラマーがあらゆる種類の魅力的なアプリケーションを開発するための豊富で強力なAPIを提供しています[1]。

たとえば、Apple iPhoneにはCクラスのプログラミング言語をサポートするSDKがあります[2]。 GoogleはJavaプログラミングAPI [3]をサポートするAndroid SDKを提供しています。
重要なことは、プログラミングの利便性、実行効率、システム要件には異なるプログラミングモデルが異なる意味を持つことです。
エンドユーザーに最高のユーザーエクスペリエンスを提供するためには、システムソフトウェア設計者がこれらの意味を理解することが重要です。

Androidには3つの
同じシステム内のモデルをプログラミングする：
SDK [3]でのJavaサポート、NDK [4]でのC ++サポート、およびレンダスクリプトサポート[5]

開発者は、異なるモデルで開発された同じアプリケーションのさまざまなバリエーションを期待できますが、3つのプログラミングモデルはすべて同様の機能のアプリケーションを開発するために使用できます。


各プログラミングモデルの長所と短所、プラットフォームアーキテクチャへのその影響、技術的な相関関係、トレンドを十分に理解するために、3つのAPIのすべてで同じ代表的なAndroidアプリケーションのバリエーションを開発します。

次に、同じアプリケーションに基づいて詳細なリンゴとリンゴの分析を行います。

我々の分析では、3つのモデルのそれぞれに長所と短所があります。

プログラマビリティ、移植性、セキュリティ、パフォーマンスのためのモバイルアプリケーションのすべての要件を満たすことができる単一のモデルはありません。

1。
**SDKの亜種は非常に簡単に開発できますが、アプリケーションコードを慎重に最適化した後でも、NDKやRenderscriptに比べてパフォーマンスはかなり低くなります。**
2。
**NDKバリアントは、SDKバリアントよりもはるかに優れたパフォーマンスを実現します。 異なるマイクロアーキテクチャ間でのNDKの移植性が問題です。**
3。
**レンダスクリプトは、デバイス間で最高のパフォーマンスを実現します。
そのメモリ割り当てモデルはプログラミングを複雑にし、レガシーコードの移植を困難にします。**

この作品の主な貢献は以下のとおりです：

1。
3つのAndroidプログラミングモデルのプログラミング利便性と特性の実地比較。
2。
異なるプログラミングモデルの同じアプリケーションの実行時動作の詳細な分析
3。
異なるモデルの長所と短所、およびそれらの相関に関する調査。 この研究に基づいて、統一モデルを提案する。

3章の研究で実験設定を紹介します。

Androidプログラミングモデルは、第4章から第7章のさまざまな側面で、作業フロー、実行モデル、パフォーマンス、開発、展開の違いを含めて比較します。

この調査に基づいて、8章で統一プログラミングモデルを提案する。

私たちは9章で作業内容を要約します。

#3 Experiment setup
3つのプログラミングモデルを比較するために、すべてのモデルで代表的なアプリケーションを開発し、実際のAndroidデバイスで実行することを選択します。

このプロセス全体を通じて、アプリケーション開発、運用、実行における実践的な経験を得ることができます。

**この調査で提示したアプリケーションは、ボール[5]です。**
アプリケーションは、実際のAndroidゲームのように動作します。

センサーからの入力（方向とタッチ）を取得し、物理計算を行い、結果のグラフを画面に描画します。
ボールは、重力と地面の反発によって数百の体の動きをシミュレートします。
これは、よく知られている科学的問題のN-Bodyと似ています。
ボールのボディには、アプリケーションが起動されてから自律的に移動するときの初期状態があります。
指は身体に触れてそれをまっすぐに動かすことができ、反発によって他の身体の動きを妨げることがあります。
図1は、実行中のボールアプリケーションの画面スナップショットを示しています。
一般的なAndroidゲームとして、ボールには2つの主要な論理コンポーネントがあります。
一つは計算部分であり、身体の動きに基づいて物理計算を行う。
もう1つは画面にボディを描画するグラフィックパーツです。
プログラミングモデルの主な違いは、2つの論理コンポーネント（コンピュータとグラフィックスの処理方法）に基づいて調査できます。
次に、違いを1つ1つ詳しく説明します。

#6.Performance Difference and Analysis
#6.1 Performance metric

私たちはAndroidタブレット上のHoneycomb 3.2 OSを使って、ボールの3つのバリエーションを評価します。

主にアプリケーションの主要なパフォーマンスメトリックとしてFPS（フレーム/秒）値を測定します。
Androidは主にユーザーとのやりとりに使用されるため、FPSを主要なメトリックとして選択します。

Androidのユーザーエクスペリエンスは、エンドユーザーに見えるグラフィックユーザーインターフェイスの円滑さと応答性によって大きく左右されます。

ボールの場合、FPSはユーザーエクスペリエンスを反映するのに最適なメトリックです。

プラットフォームで達成可能な最大FPSは、プラットフォームによって決まります。
実験のデバイスは最大FPS値として60を設定します。

つまり、1フレームの計算に1/60秒（16.7ms）の時間が必要です。 1フレームの計算が16.7msより速い場合、デバイスはそれが最大であるので、60FPSを与える。
1つのフレームの計算が16.7msより長く、例えばTであるとき、デバイスは1 / TのFPS値を与える。

先に説明したように、ボールは主に2つの論理コンポーネントを持っています。

1つは計算され、もう1つはグラフィックです。

ボールの計算部分の計算量は、主に直線の関係に近いボディの数によって決定されます。
アプリケーション内のボディの数を単純に増減することで、計算量を増減することができます。
我々が使用するタブレットは、デュアルコアCPUプロセッサを備えているため、デュアルコア並列処理がサポートされています。

##6.2 Initial performance

図8は、3つのプログラミングモデルにおけるボールの初期性能を示しています。

初期バージョンでは、複数のワーカースレッドを明示的に開発したり、デザインの最適化を含まないため、SDKおよびNDKのバージョンはシングルスレッドで、RSバージョンには暗黙の複数ワーカースレッドを提供するRsForEachプリミティブが組み込まれています。

我々は、それらのすべてがある数の身体で最大FPS値60を得ることができることを見ることができる。

 説明を簡単にするために、用語「飽和点」は、アプリケーションが60FPSを維持できるときのボディの最大数を示します。

これは、行動の傾向を理解するための重要なデータです。

初期のSDK、NDK、RS（Renderscript）バージョンの飽和点は、それぞれ50、500、700ボディです。

NDKおよびRSのバージョンは、より多くの体でほぼ線形のパフォーマンス低下を起こしていますが、SDKのバージョンはより多くの本体で大幅に性能が低下します。

NDKとRSの主な違いは、スレッドモデルによるものです。

NDKはシングルスレッドであり、RSは暗黙的にマルチスレッドです。
次に、両方がシングルスレッドの場合、SDKとNDKの主な違いを見てみましょう。

##6.3 Impact of garbage collection (GC)
SDKバージョンのボールの低パフォーマンスの根本原因を調べるために、Dalvik実行エンジンで費やされた時間の割合を収集します。 時間を2つのカテゴリに分割します。

1つは物理計算用です。 もう1つは実行時のガベージコレクション用です。

図9に示すように、Dalvik時間のほぼ半分がGCで費やされています。



#9 Conclusion
この作業では、Java、C ++のNDK、C99のRenderscriptを使用してSDKのプログラミングモデルを調べます。

エンドユーザーに最高のユーザーエクスペリエンスを提供するためには、システムソフトウェア設計者にとって、これらの意味と関係を理解することが重要です。

我々は、3つのモデルすべてにおいて、同じ代表的なAndroidアプリケーションボールの変形を開発する。
同じアプリケーションに基づいて、モデルのリンゴとリンゴの詳細な分析を行います。

**我々は、3つのモデルのそれぞれにそれぞれの利点と欠点があることを見出します。 プログラマビリティ、移植性、およびパフォーマンスのために、モバイルアプリケーションのすべての要件を満たすことができるモデルは1つではありません。**

既存のモデルを組み合わせることで、現行モデルの重要な問題を取り除くのに役立つ統一プログラミングモデルを提案します。


